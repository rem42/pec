{% extends "::base.html.twig" %}
	{% block stylesheets %}
        <style>
            html, body {
                height:100%;
                padding: 0px;
                margin: 0px;
            }
	        #loading{
		        display: none;
		        border: none;
	        }
        </style>
    {% endblock %}
    {% block js %}
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-touch-fullscreen" content="yes">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    {% endblock %}


{% block body %}

    <h1>Timeline</h1>
    <div id="timeline-embed"></div>

    <script type="text/javascript">
	    var timeline_config = {
		    width: "100%",
		    height: "550",
		    debug: true,
		    source: {{ timeLine|json_encode(constant('JSON_PRETTY_PRINT'))|raw }}
	    };
	    function ajoutEvent(){
		    $('.validUser').unbind('click').click(function(){
			    var input = $(this);
			    $(input).next().fadeIn();
			    $.ajax({
				    type: "GET",
				    url: $(this).data('url'),
				    dataType: "json",
				    success : function(response)
				    {
					    if(response.status){
						    $(input).addClass('btn-success').addClass('checked').removeClass('btn-info').val('+1');
						    $(input).next().fadeOut();
						    $(input).next().next().text(response.count);
						    changeHover();
					    }else{
						    $(input).addClass('btn-info').removeClass('btn-success').removeClass('btn-danger').removeClass('checked').val('+1');
						    $(input).next().fadeOut();
						    $(input).next().next().text(response.count);
						    $(input).unbind('mouseenter mouseleave');
						    changeHover();
					    }
				    }
			    });
		    });
		    changeHover();
	    }
	    function changeHover(){
		    $('.validUser.checked').unbind('mouseenter mouseleave').hover(function(){
			    $(this).addClass('btn-danger').removeClass('btn-success').val('-1');
		    }, function(){
			    $(this).removeClass('btn-danger').addClass('btn-success').val('+1');
		    });
	    }
    </script>
    <script type="text/javascript" src="{{ asset('bundles/app/js/timeline/storyjs-embed.js') }}"></script>
{% endblock %}